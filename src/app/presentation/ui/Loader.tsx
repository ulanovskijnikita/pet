import { useEffect, useRef } from "react"
import { animate, createScope, Scope, svg } from "animejs"

const Loader = () => {

    const root = useRef<HTMLDivElement>(null)

    const scope = useRef<Scope | null>(null)

    const drawable = useRef<SVGPathElement>(null)

    useEffect(() => {

        scope.current = createScope({ root })
            .add(() => {

                animate(svg.createDrawable(drawable.current!), {

                    draw: ['0 0', '0 1', '1 1'],
                    duration: 2000,
                    loop: true
                })
            })
    })

    return (

        <div ref={root} className="w-[100px] tablet:w-[150px]">

            <svg viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">

                <path ref={drawable} d="M30.6945 6.8231C31.8801 5.9681 33.2595 5.7002 34.2 5.7002H38.3211C39.6122 5.70009 40.879 6.05078 41.9862 6.7148L47.0677 9.7643C47.4893 10.0176 47.8381 10.3756 48.0803 10.8036C48.3226 11.2316 48.4499 11.715 48.45 12.2067V15.6752C48.45 16.809 47.9996 17.8964 47.1979 18.6981C46.3962 19.4998 45.3088 19.9502 44.175 19.9502H42.75V42.8585C43.9498 43.0437 45.1525 43.4912 46.1557 44.3262C47.6092 45.5346 48.45 47.3957 48.45 49.8752C48.45 50.2531 48.2999 50.6156 48.0326 50.8828C47.7654 51.1501 47.4029 51.3002 47.025 51.3002H14.25C12.4562 51.3004 10.7078 50.7364 9.25227 49.6881C7.79671 48.6398 6.70773 47.1603 6.13945 45.4589C5.57117 43.7575 5.55238 41.9205 6.08575 40.2079C6.61912 38.4953 7.67763 36.9937 9.11144 35.9159C9.41395 35.6977 9.78997 35.6067 10.1588 35.6627C10.5276 35.7186 10.8597 35.9169 11.084 36.215C11.3082 36.5131 11.4066 36.8872 11.358 37.257C11.3095 37.6269 11.1179 37.9629 10.8243 38.193C9.86802 38.9115 9.16199 39.9126 8.80616 41.0545C8.45034 42.1964 8.46275 43.4214 8.84165 44.5559C9.22055 45.6903 9.94673 46.6769 10.9174 47.3758C11.888 48.0747 13.0539 48.4506 14.25 48.4502C15.0708 48.4502 15.5895 48.2507 15.9315 48.0227C16.2696 47.7894 16.54 47.4708 16.7152 47.0993C16.9442 46.631 17.0751 46.1209 17.1 45.6002V45.4719L17.1114 45.1584C17.2059 43.5088 17.454 41.8715 17.8524 40.2678C18.6019 37.2753 20.121 33.4392 23.2161 30.3413C28.4715 25.0887 28.5 18.0435 28.5 15.6752V11.4002C28.5 9.22565 29.4405 7.7294 30.6945 6.8231ZM31.1334 19.6652C30.6916 23.2448 29.3407 28.2494 25.2339 32.3591C22.629 34.9611 21.298 38.25 20.6197 40.9575C20.2664 42.3771 20.045 43.8264 19.9585 45.2867C19.9547 45.3693 19.9519 45.452 19.95 45.5346V45.6942L19.9386 45.8852C19.8756 46.7793 19.6333 47.6517 19.2261 48.4502H36.8191C36.5341 47.5382 35.9556 46.6005 34.9609 46.079C34.2825 45.7428 33.5319 45.5784 32.775 45.6002H29.925C29.5471 45.6002 29.1846 45.4501 28.9174 45.1828C28.6501 44.9156 28.5 44.5531 28.5 44.1752C28.5 43.7973 28.6501 43.4348 28.9174 43.1676C29.1846 42.9003 29.5471 42.7502 29.925 42.7502H32.775C33.2766 42.7502 33.7497 42.7901 34.2 42.8642V35.6252C34.2 35.2473 34.3501 34.8848 34.6174 34.6176C34.8846 34.3503 35.2471 34.2002 35.625 34.2002C36.0029 34.2002 36.3654 34.3503 36.6326 34.6176C36.8999 34.8848 37.05 35.2473 37.05 35.6252V44.027C38.703 45.2183 39.4639 46.991 39.7518 48.4502H45.4518C45.238 47.5154 44.8105 46.914 44.3317 46.5179C43.5993 45.9051 42.5362 45.6002 41.325 45.6002C40.9471 45.6002 40.5846 45.4501 40.3174 45.1828C40.0501 44.9156 39.9 44.5531 39.9 44.1752V18.5252C39.9 18.1473 40.0501 17.7848 40.3174 17.5176C40.5846 17.2503 40.9471 17.1002 41.325 17.1002H44.175C44.5529 17.1002 44.9154 16.9501 45.1826 16.6828C45.4499 16.4156 45.6 16.0531 45.6 15.6752V12.2067L40.5213 9.15725C39.8565 8.75924 39.096 8.54941 38.3211 8.5502H34.2C33.7155 8.5502 32.9574 8.70695 32.3617 9.1373C31.8345 9.5135 31.35 10.1547 31.35 11.4002V15.6752C31.35 15.9231 31.4355 16.325 31.6521 16.6242C31.8145 16.8522 32.0995 17.1002 32.775 17.1002C33.4504 17.1002 33.7354 16.8494 33.8979 16.6242C34.0877 16.3435 34.1925 16.014 34.2 15.6752C34.2 15.2973 34.3501 14.9348 34.6174 14.6676C34.8846 14.4003 35.2471 14.2502 35.625 14.2502C36.0029 14.2502 36.3654 14.4003 36.6326 14.6676C36.8999 14.9348 37.05 15.2973 37.05 15.6752C37.05 16.3791 36.8505 17.4023 36.2121 18.2886C35.5195 19.2491 34.3795 19.9502 32.775 19.9502C32.215 19.9555 31.6588 19.859 31.1334 19.6652Z" stroke="#DEAD6F" fill="none"/>
                
            </svg>
        </div>
    )
}

export default Loader